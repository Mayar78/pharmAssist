<div class="products-header">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-md-6">
        <h1 class="page-title">{{username}}'s Cart</h1>
      </div>
    </div>
  </div>
</div>

<div class="cart-container">
  @if (cartData?.items?.length) {
    <div class="cart-section">
      <div class="cart-header">
        <h1 class="cart-title">
          <i class="fa-brands fa-shopify"></i>
          Shopping Cart
        </h1>
        <button class="clear-cart-btn" (click)="clearAllCart()">
          <i class="fa-solid fa-broom"></i>
          Clear Cart
        </button>
      </div>

      <div class="cart-items">
        @for (item of cartData?.items; track item.id) {
          <div class="cart-item">
            <button class="remove-btn" (click)="deleteItem(item.id)">
              <i class="fa-solid fa-times"></i>
            </button>
            
            <div class="item-image">
              <img [src]="item.pictureUrl || 'assets/images/placeholder.png'"
                   [alt]="item.name"
                   onerror="this.src='assets/images/placeholder.png'">
            </div>
            
            <div class="item-details">
              <h2 class="item-name">{{item.name}}</h2>
              <p class="item-ingredient">{{item.activeIngredient}}</p>
              <p class="item-price">{{item.price | currency:'EGP'}}</p>
            </div>
<!--             
            <div class="item-controls">
              <div class="quantity-controls">
                <button class="quantity-btn minus" 
                        (click)="updateQuantity(item.id, item.quantity - 1)"
                        [disabled]="item.quantity <= 1">
                  <i class="fa-solid fa-minus"></i>
                </button>
                <span class="quantity">{{item.quantity}}</span>
                <button class="quantity-btn plus" 
                        (click)="updateQuantity(item.id, item.quantity + 1)">
                  <i class="fa-solid fa-plus"></i>
                </button>
              </div>
              <div class="item-total">{{item.price * item.quantity | currency:'EGP'}}</div>
            </div> -->
          </div>
        }
      </div>

      <div class="cart-summary">
        <div class="total-section">
          <span>Total:</span>
          <span>{{calculateTotal() | currency:'EGP'}}</span>
        </div>
        <button [routerLink]="'/checkout'" class="checkout-btn">
          <i class="fa-solid fa-credit-card"></i>
          Proceed to Checkout
        </button>
      </div>
    </div>
  } @else {
    <div class="cart-section">
      <div class="cart-header">
        <h1 class="cart-title">
          <i class="fa-brands fa-shopify"></i>
          Shopping Cart
        </h1>
      </div>
      
      <div class="empty-cart">
        <div class="empty-cart-icon">
          <i class="fa-solid fa-shopping-cart"></i>
        </div>
        <h3>Your cart is empty</h3>
        <p>Add some medicines to get started</p>
        <a routerLink="/main/AllProducts" class="browse-btn">
          <i class="fa-solid fa-pills"></i>
          Browse Products
        </a>
      </div>
    </div>
  }
</div>
